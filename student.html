<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ÙƒØªØ¨ÙŠ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ | Space Station</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  :root {
    --primary: #3b82f6;
    --accent: #8b5cf6;
    --bg-dark: #0f172a;
    --glass: rgba(30, 41, 59, 0.7);
    --glass-border: rgba(255, 255, 255, 0.1);
    --text: #f1f5f9;
    --danger: #ef4444;
    --success: #10b981;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

  body {
    font-family: 'Tajawal', sans-serif;
    background-color: var(--bg-dark);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* --- Ø§Ù„Ø®Ù„ÙÙŠØ© (Ù†Ø¬ÙˆÙ…) --- */
  .stars-bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1; pointer-events: none;
    background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
  }
  .star {
    position: absolute; background: white; border-radius: 50%;
    animation: twinkle infinite ease-in-out;
  }
  @keyframes twinkle { 0%,100% { opacity:0.3; transform:scale(1); } 50% { opacity:1; transform:scale(1.2); } }

  /* --- Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¹Ø§Ù… --- */
  .header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 20px 40px;
    background: rgba(0,0,0,0.2);
    backdrop-filter: blur(5px);
  }
  
  .clock-widget {
    font-size: 1.5rem; font-weight: 800;
    color: var(--primary); text-shadow: 0 0 15px rgba(59,130,246,0.5);
    display: flex; align-items: center; gap: 10px;
  }

  .main-grid {
    display: grid;
    grid-template-columns: 300px 1fr 250px; /* ÙŠØ³Ø§Ø± (Ø£Ø¯ÙˆØ§Øª) - ÙˆØ³Ø· (Ø¬Ø¯ÙˆÙ„) - ÙŠÙ…ÙŠÙ† (Ù…Ù„Ø§Ø­Ø¸Ø§Øª) */
    gap: 20px;
    padding: 20px;
    max-width: 1600px;
    margin: 0 auto;
  }

  /* --- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© --- */
  .glass-card {
    background: var(--glass);
    backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    display: flex; flex-direction: column;
  }

  h2 { font-size: 1.1rem; margin-bottom: 15px; color: var(--accent); border-bottom: 1px solid var(--glass-border); padding-bottom: 8px; }

  /* --- 1. Ø§Ù„Ù…Ø¤Ù‚Øª (ÙŠØ³Ø§Ø±) --- */
  .timer-container { text-align: center; margin-bottom: 20px; }
  .timer-svg { width: 140px; height: 140px; transform: rotate(-90deg); margin: 0 auto; }
  .circle-bg { stroke: rgba(255,255,255,0.05); fill: none; stroke-width: 5; }
  .circle-progress { stroke: var(--primary); fill: none; stroke-width: 5; stroke-dasharray: 440; stroke-dashoffset: 0; transition: 1s linear; filter: drop-shadow(0 0 5px var(--primary)); }
  .timer-text { font-size: 2.2rem; font-weight: bold; margin-top: -95px; margin-bottom: 45px; display: block; }
  
  .btn-group { display: flex; gap: 5px; justify-content: center; }
  .btn { padding: 8px 15px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; font-family: inherit; transition: 0.2s; }
  .btn-primary { background: var(--primary); color: white; }
  .btn-primary:hover { background: #2563eb; transform: translateY(-2px); }
  .btn-danger { background: var(--danger); color: white; }

  /* --- 2. Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø© (ÙŠØ³Ø§Ø±) --- */
  .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; }
  .calc-screen { grid-column: span 4; background: rgba(0,0,0,0.3); color: #fff; padding: 10px; border-radius: 5px; text-align: left; font-size: 1.2rem; margin-bottom: 5px; border: 1px solid var(--glass-border); height: 40px; }
  .calc-btn { background: rgba(255,255,255,0.05); color: white; padding: 10px; border-radius: 5px; cursor: pointer; border: none; font-size: 1rem; transition: 0.2s; }
  .calc-btn:hover { background: rgba(255,255,255,0.1); }
  .calc-btn.op { color: var(--accent); }
  .calc-btn.eq { background: var(--primary); grid-column: span 2; }

  /* --- 3. Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ (ÙˆØ³Ø·) --- */
  .add-form {
    display: grid;
    grid-template-columns: 2fr 1.5fr 1fr auto;
    gap: 10px;
    margin-bottom: 15px;
    background: rgba(0,0,0,0.2);
    padding: 10px;
    border-radius: 10px;
  }
  
  .input-field {
    background: transparent; border: none; border-bottom: 2px solid var(--glass-border);
    color: white; padding: 8px; font-family: inherit; width: 100%; transition: 0.3s;
  }
  .input-field:focus { border-color: var(--primary); }
  .input-field::placeholder { color: rgba(255,255,255,0.3); }

  .schedule-table { width: 100%; border-collapse: collapse; }
  .schedule-table th { text-align: right; padding: 12px; color: #94a3b8; font-size: 0.9rem; border-bottom: 1px solid var(--glass-border); }
  .schedule-table td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.03); vertical-align: middle; }
  
  .badge { padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; background: rgba(255,255,255,0.1); margin-left: 5px; display: inline-block;}
  .badge-time { color: #fdba74; background: rgba(253, 186, 116, 0.1); }
  .badge-days { color: #a5b4fc; background: rgba(165, 180, 252, 0.1); }

  .actions { display: flex; gap: 10px; }
  .check-btn { color: #94a3b8; cursor: pointer; transition: 0.2s; }
  .check-btn:hover { color: var(--success); }
  .check-btn.completed { color: var(--success); }
  .row-completed td { opacity: 0.5; text-decoration: line-through; }
  
  .download-btn { width: 100%; margin-top: 15px; padding: 12px; background: var(--success); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }

  /* --- 4. Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (ÙŠÙ…ÙŠÙ†) --- */
  .notes-area {
    width: 100%; height: 100%; min-height: 200px;
    background: transparent; border: none; color: #cbd5e1;
    font-family: inherit; line-height: 1.6; resize: none;
    font-size: 0.95rem;
  }
  .notes-area::placeholder { color: rgba(255,255,255,0.2); }

  /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ */
  @media (max-width: 1024px) {
    .main-grid { grid-template-columns: 1fr; }
    .add-form { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="stars-bg" id="starsBg"></div>

<div class="header">
  <div style="font-weight:bold; font-size:1.2rem;">ğŸš€ Ù…Ù†ØµØ© Ø²ÙŠØ¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</div>
  <div class="clock-widget">
    <i class="fa-regular fa-clock"></i>
    <span id="clock">00:00:00</span>
  </div>
</div>

<div class="main-grid">

  <div style="display: flex; flex-direction: column; gap: 20px;">
    
    <div class="glass-card timer-container">
      <h2><i class="fa-solid fa-hourglass-half"></i> Ø§Ù„Ù…Ø¤Ù‚Øª</h2>
      <div style="position:relative; width:140px; margin:0 auto;">
        <svg class="timer-svg" viewBox="0 0 140 140">
          <circle class="circle-bg" cx="70" cy="70" r="65"></circle>
          <circle class="circle-progress" id="progress" cx="70" cy="70" r="65"></circle>
        </svg>
      </div>
      <span class="timer-text" id="timerDisplay">25:00</span>
      
      <div class="btn-group">
        <button class="btn btn-primary" id="startBtn" onclick="toggleTimer()">Ø§Ø¨Ø¯Ø£</button>
        <button class="btn" style="background:rgba(255,255,255,0.1); color:#fff;" onclick="resetTimer()">Ø¥Ø¹Ø§Ø¯Ø©</button>
      </div>
      
      <div style="margin-top:15px; font-size:0.8rem; color:#94a3b8; display:flex; justify-content:center; gap:5px; align-items:center;">
        <span>Ø¯Ø±Ø§Ø³Ø©:</span> <input type="number" id="studyMin" value="25" style="width:35px; background:transparent; border:1px solid #444; color:#fff; text-align:center; border-radius:4px;">
        <span>Ø±Ø§Ø­Ø©:</span> <input type="number" id="breakMin" value="5" style="width:35px; background:transparent; border:1px solid #444; color:#fff; text-align:center; border-radius:4px;">
      </div>
    </div>

    <div class="glass-card">
      <h2><i class="fa-solid fa-calculator"></i> Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©</h2>
      <div class="calc-grid">
        <input type="text" class="calc-screen" id="calcScreen" readonly>
        <button class="calc-btn op" onclick="calcClear()">C</button>
        <button class="calc-btn op" onclick="calcAppend('/')">Ã·</button>
        <button class="calc-btn op" onclick="calcAppend('*')">Ã—</button>
        <button class="calc-btn op" onclick="calcDel()">âŒ«</button>
        
        <button class="calc-btn" onclick="calcAppend('7')">7</button>
        <button class="calc-btn" onclick="calcAppend('8')">8</button>
        <button class="calc-btn" onclick="calcAppend('9')">9</button>
        <button class="calc-btn op" onclick="calcAppend('-')">-</button>
        
        <button class="calc-btn" onclick="calcAppend('4')">4</button>
        <button class="calc-btn" onclick="calcAppend('5')">5</button>
        <button class="calc-btn" onclick="calcAppend('6')">6</button>
        <button class="calc-btn op" onclick="calcAppend('+')">+</button>
        
        <button class="calc-btn" onclick="calcAppend('1')">1</button>
        <button class="calc-btn" onclick="calcAppend('2')">2</button>
        <button class="calc-btn" onclick="calcAppend('3')">3</button>
        <button class="calc-btn eq" onclick="calcEqual()">=</button>
        
        <button class="calc-btn" onclick="calcAppend('0')" style="grid-column: span 2">0</button>
        <button class="calc-btn" onclick="calcAppend('.')">.</button>
      </div>
    </div>

  </div>

  <div class="glass-card" id="scheduleCard">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2><i class="fa-solid fa-calendar-days"></i> Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h2>
        <span style="font-size:0.8rem; color:#aaa;" data-html2canvas-ignore="true">ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</span>
    </div>

    <div class="add-form" data-html2canvas-ignore="true">
      <input type="text" id="subjName" class="input-field" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© (Ù…Ø«Ø§Ù„: ÙÙŠØ²ÙŠØ§Ø¡)">
      <input type="text" id="subjDays" class="input-field" placeholder="Ø§Ù„Ø£ÙŠØ§Ù… (Ø³Ø¨ØªØŒ Ø§Ø«Ù†ÙŠÙ†..)">
      <input type="text" id="subjTime" class="input-field" placeholder="Ø§Ù„ÙˆÙ‚Øª (4:00 - 6:00)">
      <button class="btn btn-primary" onclick="addSubject()"><i class="fa-solid fa-plus"></i></button>
    </div>

    <div style="overflow-x:auto;">
      <table class="schedule-table">
        <thead>
          <tr>
            <th width="5%"></th>
            <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
            <th>Ø§Ù„Ø£ÙŠØ§Ù…</th>
            <th>Ø§Ù„ØªÙˆÙ‚ÙŠØª</th>
            <th width="5%" data-html2canvas-ignore="true"></th>
          </tr>
        </thead>
        <tbody id="scheduleBody">
          </tbody>
      </table>
    </div>
    
    
  </div>

  <div class="glass-card">
    <h2><i class="fa-solid fa-note-sticky"></i> Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
    <textarea id="notesArea" class="notes-area" placeholder="Ø§ÙƒØªØ¨ Ø£ÙÙƒØ§Ø±ÙƒØŒ Ù…Ù‡Ø§Ù…Ùƒ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ù‡Ù†Ø§..."></textarea>
  </div>

</div>

<audio id="alarm" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>
<audio id="tick" src="https://assets.mixkit.co/active_storage/sfx/2578/2578-preview.mp3"></audio>

<script>
  // --- 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ù„ÙÙŠØ© (Ù†Ø¬ÙˆÙ…) ---
  const starsContainer = document.getElementById('starsBg');
  for(let i=0; i<150; i++){
    let s = document.createElement('div');
    s.className = 'star';
    s.style.left = Math.random()*100 + '%';
    s.style.top = Math.random()*100 + '%';
    s.style.width = Math.random()*2 + 'px';
    s.style.height = s.style.width;
    s.style.animationDuration = (Math.random()*3 + 2) + 's';
    starsContainer.appendChild(s);
  }

  // --- 2. Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ---
  function updateClock() {
    const now = new Date();
    document.getElementById('clock').textContent = now.toLocaleTimeString('ar-JO');
  }
  setInterval(updateClock, 1000);
  updateClock();

  // --- 3. Ø§Ù„Ù…Ø¤Ù‚Øª (Pomodoro) ---
  let timeLeft, totalTime, timerInt;
  let isRunning = false;
  let isStudy = true;
  const progress = document.getElementById('progress');
  const timerDisplay = document.getElementById('timerDisplay');
  const startBtn = document.getElementById('startBtn');
  const CIRCUMFERENCE = 440; // 2 * pi * 70 (approx)

  progress.style.strokeDasharray = CIRCUMFERENCE;

  function toggleTimer() { isRunning ? pause() : start(); }

  function start() {
    isRunning = true;
    startBtn.textContent = "Ø¥ÙŠÙ‚Ø§Ù";
    startBtn.classList.replace('btn-primary', 'btn-danger');
    if(!timeLeft) resetTimer();

    timerInt = setInterval(() => {
      if(timeLeft > 0) {
        if(timeLeft <= 5) { document.getElementById('tick').play(); }
        timeLeft--;
        updateTimerUI();
      } else {
        finishTimer();
      }
    }, 1000);
  }

  function pause() {
    clearInterval(timerInt);
    isRunning = false;
    startBtn.textContent = "Ø§Ø³ØªÙƒÙ…Ø§Ù„";
    startBtn.classList.replace('btn-danger', 'btn-primary');
  }

  function resetTimer() {
    pause();
    isStudy = true;
    let min = document.getElementById('studyMin').value;
    totalTime = min * 60;
    timeLeft = totalTime;
    document.documentElement.style.setProperty('--primary', '#3b82f6');
    startBtn.textContent = "Ø§Ø¨Ø¯Ø£";
    startBtn.classList.replace('btn-danger', 'btn-primary');
    updateTimerUI();
  }

  function updateTimerUI() {
    let m = Math.floor(timeLeft / 60);
    let s = timeLeft % 60;
    timerDisplay.textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    let offset = CIRCUMFERENCE - (timeLeft / totalTime) * CIRCUMFERENCE;
    progress.style.strokeDashoffset = offset;
    document.title = `(${timerDisplay.textContent}) Ø¯Ø±Ø§Ø³Ø©`;
  }

  function finishTimer() {
    pause();
    document.getElementById('alarm').play();
    if(isStudy) {
      isStudy = false;
      let min = document.getElementById('breakMin').value;
      totalTime = min * 60;
      timeLeft = totalTime;
      document.documentElement.style.setProperty('--primary', '#10b981'); // Ø£Ø®Ø¶Ø±
      alert("Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©! Ø®Ø° Ø§Ø³ØªØ±Ø§Ø­Ø© â˜•");
    } else {
      resetTimer();
      alert("ÙŠÙ„Ø§ Ù†Ø±Ø¬Ø¹ Ù„Ù„Ø¯Ø±Ø§Ø³Ø© ğŸ’ª");
    }
    updateTimerUI();
  }
  resetTimer(); // init

  // --- 4. Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ ---
  const scheduleBody = document.getElementById('scheduleBody');

  function addSubject() {
    const name = document.getElementById('subjName').value;
    const days = document.getElementById('subjDays').value;
    const time = document.getElementById('subjTime').value;

    if(!name) return;

    const row = document.createElement('tr');
    row.innerHTML = `
      <td><i class="fa-regular fa-circle-check check-btn" onclick="toggleComplete(this)"></i></td>
      <td style="font-weight:bold;">${name}</td>
      <td>${days ? `<span class="badge badge-days"><i class="fa-solid fa-calendar-week"></i> ${days}</span>` : '-'}</td>
      <td>${time ? `<span class="badge badge-time"><i class="fa-regular fa-clock"></i> ${time}</span>` : '-'}</td>
      <td data-html2canvas-ignore="true"><i class="fa-solid fa-trash" style="color:#ef4444; cursor:pointer;" onclick="deleteRow(this)"></i></td>
    `;
    scheduleBody.appendChild(row);
    
    // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
    document.getElementById('subjName').value = '';
    document.getElementById('subjDays').value = '';
    document.getElementById('subjTime').value = '';
    
    saveData();
  }

  function toggleComplete(icon) {
    icon.classList.toggle('fa-regular');
    icon.classList.toggle('fa-solid');
    icon.classList.toggle('completed');
    icon.closest('tr').classList.toggle('row-completed');
    saveData();
  }

  function deleteRow(icon) {
    if(confirm('Ø­Ø°Ù Ø§Ù„Ù…Ø§Ø¯Ø©ØŸ')) {
      icon.closest('tr').remove();
      saveData();
    }
  }

  function saveData() {
    localStorage.setItem('zaidSchedule', scheduleBody.innerHTML);
  }

  function loadData() {
    if(localStorage.getItem('zaidSchedule')) {
      scheduleBody.innerHTML = localStorage.getItem('zaidSchedule');
    }
    if(localStorage.getItem('zaidNotes')) {
      document.getElementById('notesArea').value = localStorage.getItem('zaidNotes');
    }
  }
  loadData();

  function downloadPDF() {
    const element = document.getElementById('scheduleCard');
    const opt = {
      margin: 10,
      filename: 'Ø¬Ø¯ÙˆÙ„_Ø¯Ø±Ø§Ø³Ø©_Ø²ÙŠØ¯.pdf',
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2, backgroundColor: '#1e293b' },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' }
    };
    html2pdf().set(opt).from(element).save();
  }

  // --- 5. Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø© ---
  const screen = document.getElementById('calcScreen');
  function calcAppend(val) { screen.value += val; }
  function calcClear() { screen.value = ''; }
  function calcDel() { screen.value = screen.value.slice(0, -1); }
  function calcEqual() {
    try { screen.value = eval(screen.value); } 
    catch { screen.value = 'Error'; setTimeout(calcClear, 1000); }
  }

  // --- 6. Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ) ---
  document.getElementById('notesArea').addEventListener('input', function() {
    localStorage.setItem('zaidNotes', this.value);
  });

</script>
</body>
</html>